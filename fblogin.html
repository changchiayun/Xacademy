<!DOCTYPE html>
<html>
  <head>
  <meta charset=utf-8 />
    <title>編輯最新消息─X書院@創意實驗室</title>
    <link rel="stylesheet" type="text/css" href="CSS/FriendLists.css"/>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  </head>

  <body>
    <div id="fb-root"></div>
    <script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script>
    <script>
      var defaultPath = "news.html";
      var successPath = "newsEdit.html";
      var uid;
      var Access_Token;
      var GroupID = new Array;
      var GroupMember = new Array;
      
      window.fbAsyncInit = function() {
        FB.init({
          appId: "565761823469794", // Your facebook app id
          status: true,
          cookie: true,
          xfbml: true
        });
      }
      
      (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/zh_TW/all.js#xfbml=1&appId=565761823469794";
      fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>
    <script>
      $(window).load(function () {
          FB.login();
      });
      
      
      function loginDialog(){
        
        FB.getLoginStatus(function(response) {
          if (response.status === 'connected') {
          
            uid = response.authResponse.userID;
            Access_Token = response.authResponse.accessToken;
            //authResponse returns the list such as below
            //If you store these informations, you can further use them to promote your website
            /* the form returned
            {
              status: 'connected',
              authResponse: {
                accessToken: '...',
                expiresIn:'...',
                signedRequest:'...',
                userID:'...'
              }
            }
            */
  
            if (uid == '100001224735120') {
              window.location = successPath;
            }else{
              alert("you can not edit the news!");
              window.location = defaultPath;
            };
          } else if (response.status === 'not_authorized') {
          // the user is logged in to Facebook, but not connected to the app
            alert("Please authorize this app!");
            window.location = defaultPath;
          } else {
          // the user isn't even logged in to Facebook.
            alert("Please Login with your Facebook account!");
            window.location = defaultPath;
          }
        });
        
      }

  </body>
</html>